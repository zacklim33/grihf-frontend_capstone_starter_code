{"ast":null,"code":"import React,{useEffect,useState,createElement as _createElement}from'react';import'./InstantConsultation.css';import{useNavigate,useSearchParams}from'react-router-dom';import FindDoctorSearchIC from'./FindDoctorSearchIC/FindDoctorSearchIC';import DoctorCardIC from'./DoctorCardIC/DoctorCardIC';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const InstantConsultation=()=>{const[searchParams]=useSearchParams();const[doctors,setDoctors]=useState([]);const[filteredDoctors,setFilteredDoctors]=useState([]);const[isSearched,setIsSearched]=useState(false);const getDoctorsDetails=()=>{fetch('https://api.npoint.io/9a5543d36f1460da2f63').then(res=>res.json()).then(data=>{if(searchParams.get('speciality')){// window.reload()\nconst filtered=data.filter(doctor=>doctor.speciality.toLowerCase()===searchParams.get('speciality').toLowerCase());setFilteredDoctors(filtered);setIsSearched(true);window.reload();}else{setFilteredDoctors([]);setIsSearched(false);}setDoctors(data);}).catch(err=>console.log(err));};const handleSearch=searchText=>{if(searchText===''){setFilteredDoctors([]);setIsSearched(false);}else{const filtered=doctors.filter(doctor=>// \ndoctor.speciality.toLowerCase().includes(searchText.toLowerCase()));setFilteredDoctors(filtered);setIsSearched(true);window.location.reload();}};const navigate=useNavigate();useEffect(()=>{getDoctorsDetails();// const authtoken = sessionStorage.getItem(\"auth-token\");\n// if (!authtoken) {\n//     navigate(\"/login\");\n// }\n},[searchParams]);return/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"searchpage-container\",children:[/*#__PURE__*/_jsx(FindDoctorSearchIC,{onSearch:handleSearch}),/*#__PURE__*/_jsx(\"div\",{className:\"search-results-container\",children:isSearched?/*#__PURE__*/_jsxs(\"center\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[filteredDoctors.length,\" doctors are available \",searchParams.get('location')]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Book appointments with minimum wait-time & verified doctor details\"}),filteredDoctors.length>0?filteredDoctors.map(doctor=>/*#__PURE__*/_createElement(DoctorCardIC,{className:\"doctorcard\",...doctor,key:doctor.name})):/*#__PURE__*/_jsx(\"p\",{children:\"No doctors found.\"})]}):''})]})});};export default InstantConsultation;","map":{"version":3,"names":["React","useEffect","useState","createElement","_createElement","useNavigate","useSearchParams","FindDoctorSearchIC","DoctorCardIC","jsx","_jsx","jsxs","_jsxs","InstantConsultation","searchParams","doctors","setDoctors","filteredDoctors","setFilteredDoctors","isSearched","setIsSearched","getDoctorsDetails","fetch","then","res","json","data","get","filtered","filter","doctor","speciality","toLowerCase","window","reload","catch","err","console","log","handleSearch","searchText","includes","location","navigate","children","className","onSearch","length","map","key","name"],"sources":["C:/Users/lim_l/Documents/progamming/032-grihf-frontend_capstone_starter_code/src/Components/InstantConsultation/InstantConsultation.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './InstantConsultation.css';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport FindDoctorSearchIC from './FindDoctorSearchIC/FindDoctorSearchIC';\r\nimport DoctorCardIC from './DoctorCardIC/DoctorCardIC';\r\n\r\nconst InstantConsultation = () => {\r\n    const [searchParams] = useSearchParams();\r\n    const [doctors, setDoctors] = useState([]);\r\n    const [filteredDoctors, setFilteredDoctors] = useState([]);\r\n    const [isSearched, setIsSearched] = useState(false);\r\n    \r\n    const getDoctorsDetails = () => {\r\n        fetch('https://api.npoint.io/9a5543d36f1460da2f63')\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if (searchParams.get('speciality')) {\r\n                // window.reload()\r\n                const filtered = data.filter(doctor => doctor.speciality.toLowerCase() === searchParams.get('speciality').toLowerCase());\r\n\r\n                setFilteredDoctors(filtered);\r\n                \r\n                setIsSearched(true);\r\n                window.reload()\r\n            } else {\r\n                setFilteredDoctors([]);\r\n                setIsSearched(false);\r\n            }\r\n            setDoctors(data);\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n\r\n    const handleSearch = (searchText) => {\r\n\r\n        if (searchText === '') {\r\n            setFilteredDoctors([]);\r\n            setIsSearched(false);\r\n            } else {\r\n                \r\n            const filtered = doctors.filter(\r\n                (doctor) =>\r\n                // \r\n                doctor.speciality.toLowerCase().includes(searchText.toLowerCase())\r\n                \r\n            );\r\n                \r\n            setFilteredDoctors(filtered);\r\n            setIsSearched(true);\r\n            window.location.reload()\r\n        }\r\n    };\r\n\r\n    const navigate = useNavigate();\r\n    \r\n    useEffect(() => {\r\n        getDoctorsDetails();\r\n        // const authtoken = sessionStorage.getItem(\"auth-token\");\r\n        // if (!authtoken) {\r\n        //     navigate(\"/login\");\r\n        // }\r\n    }, [searchParams])\r\n\r\n    return (\r\n        <center>\r\n            <div  className=\"searchpage-container\">\r\n            <FindDoctorSearchIC onSearch={handleSearch} />\r\n            <div className=\"search-results-container\">\r\n            {isSearched ? (\r\n                <center>\r\n                    <h2>{filteredDoctors.length} doctors are available {searchParams.get('location')}</h2>\r\n                    <h3>Book appointments with minimum wait-time & verified doctor details</h3>\r\n                    {filteredDoctors.length > 0 ? (\r\n                    filteredDoctors.map(doctor => <DoctorCardIC className=\"doctorcard\" {...doctor} key={doctor.name} />)\r\n                    ) : (\r\n                    <p>No doctors found.</p>\r\n                    )}\r\n                </center>\r\n                ) : (\r\n                ''\r\n                )}\r\n            </div>\r\n        </div>\r\n        </center>\r\n    )\r\n}\r\n\r\nexport default InstantConsultation"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
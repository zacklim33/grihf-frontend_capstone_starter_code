{"ast":null,"code":"import React,{useEffect,useState}from'react';import Popup from'reactjs-popup';import'./ReviewTable.css';import GiveReviews from'./GiveReviews';//decoy doctor data - to be replaced with an approriate API endpoint\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const doctors=[{id:1,name:'Dr. Zela Lee',specialty:'General Physician'},{id:2,name:'Dr. Williams Huang',specialty:'Dentist'},{id:3,name:'Dr. Smith Johnson',specialty:'Cardiology'},{id:4,name:'Dr. Lena Chow',specialty:'Dermatology'},{id:5,name:'Dr. Apu Ali',specialty:'Homeopath'}];const ReviewTable=()=>{//set initial states \nconst[reviewData,setReviewData]=useState({});//empty data object passed onto feedback modal\nconst[completedReview,setCompletedReview]=useState({});// Track completed reviews\nconst[chosenDoctor,setChosenDoctor]=useState(null);// Track which doctor is selected; doctor's ID\nconst[showForm,setShowForm]=useState(false);// Add state to control form visibility\n//prop to be passed onto GiveReviews component\nconst handleGiveReview=serialNumber=>{setChosenDoctor(serialNumber);setCompletedReview(prevState=>({...prevState,id:serialNumber,ratings:0,review:\"\"}));setReviewData(prevReviewData=>({...prevReviewData,[serialNumber]:''}));};//\nconst handleReviewSubmit=(serialNumber,formData)=>{setReviewData(prevReviewData=>({...prevReviewData,[serialNumber]:formData}));setCompletedReview(prev=>({...prev,[serialNumber]:{ratings:formData.rating,review:formData.review}}));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"reviews-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" Reviews \",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"review-table\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[\" \",/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"S/No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Doctor name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Doctor specialty\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Provide review\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Review given\"})]})]}),/*#__PURE__*/_jsx(\"tbody\",{children:doctors.map(doctor=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:doctor.id}),/*#__PURE__*/_jsx(\"td\",{children:doctor.name}),/*#__PURE__*/_jsx(\"td\",{children:doctor.specialty}),/*#__PURE__*/_jsx(\"td\",{children:!completedReview[doctor.id]?/*#__PURE__*/_jsx(Popup,{contentStyle:{width:'33%',height:'auto',borderRadius:\"0.5rem\"},trigger:/*#__PURE__*/_jsx(\"button\",{className:\"review-btn\",onClick:()=>handleGiveReview(doctor.id),disabled:completedReview[doctor.id]&&completedReview[doctor.id].ratings>0&&completedReview[doctor.id].remarks.length>0,children:\"Give Review \"}),modal:true,nested:true,children:close=>/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-modal\",children:[/*#__PURE__*/_jsx(GiveReviews,{serialNumber:doctor.id,onReviewSubmit:(serialNumber,formData)=>{handleReviewSubmit(serialNumber,formData);close();// Close the modal after submission\n},review:reviewData[doctor.id]// Pass the review data\n,onSubmit:close}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:close,children:\"Close \"})]})}):/*#__PURE__*/_jsx(\"button\",{className:\"review-btn\",disabled:true,children:\" Give review \"})}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",completedReview[doctor.id]&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Rating: \",completedReview[doctor.id].ratings,\"/5 \",/*#__PURE__*/_jsx(\"br\",{}),\"\\\"\",completedReview[doctor.id].review,\"\\\"\"]})]})]},doctor.id))})]})]})});};export default ReviewTable;","map":{"version":3,"names":["React","useEffect","useState","Popup","GiveReviews","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","doctors","id","name","specialty","ReviewTable","reviewData","setReviewData","completedReview","setCompletedReview","chosenDoctor","setChosenDoctor","showForm","setShowForm","handleGiveReview","serialNumber","prevState","ratings","review","prevReviewData","handleReviewSubmit","formData","prev","rating","children","className","map","doctor","contentStyle","width","height","borderRadius","trigger","onClick","disabled","remarks","length","modal","nested","close","onReviewSubmit","onSubmit"],"sources":["C:/Users/lim_l/Documents/progamming/032-grihf-frontend_capstone_starter_code/src/Components/reviewform/ReviewTable.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Popup from 'reactjs-popup';\r\nimport './ReviewTable.css';\r\nimport GiveReviews from './GiveReviews';\r\n\r\n\r\n//decoy doctor data - to be replaced with an approriate API endpoint\r\nconst doctors = [\r\n  { id: 1, name: 'Dr. Zela Lee', specialty: 'General Physician' },\r\n  { id: 2, name: 'Dr. Williams Huang', specialty: 'Dentist' },\r\n  { id: 3, name: 'Dr. Smith Johnson', specialty: 'Cardiology' },\r\n  { id: 4, name: 'Dr. Lena Chow', specialty: 'Dermatology' },\r\n  { id: 5, name: 'Dr. Apu Ali', specialty: 'Homeopath' }\r\n];\r\n\r\n\r\nconst ReviewTable = () => {\r\n  //set initial states \r\n  const [reviewData, setReviewData] = useState({}); //empty data object passed onto feedback modal\r\n  const [completedReview, setCompletedReview] = useState({}); // Track completed reviews\r\n  const [chosenDoctor, setChosenDoctor] = useState(null); // Track which doctor is selected; doctor's ID\r\n  const [showForm, setShowForm] = useState(false); // Add state to control form visibility\r\n\r\n  //prop to be passed onto GiveReviews component\r\n  const handleGiveReview = (serialNumber) => {\r\n    setChosenDoctor(serialNumber);\r\n    setCompletedReview( prevState => ({\r\n      ...prevState,\r\n      id: serialNumber, \r\n      ratings:0,\r\n      review:\"\",\r\n    }));\r\n\r\n    setReviewData((prevReviewData) => ({ ...prevReviewData, [serialNumber]: ''}));\r\n    };\r\n\r\n  //\r\n  const handleReviewSubmit = (serialNumber, formData) => {\r\n        setReviewData((prevReviewData) => ({ ...prevReviewData, [serialNumber]: formData }));\r\n        setCompletedReview( (prev) => ({\r\n          ...prev,\r\n          [serialNumber]: {\r\n            ratings:formData.rating,\r\n            review: formData.review,\r\n          }\r\n        }) )\r\n   };\r\n\r\n\r\n\r\nreturn ( \r\n<>\r\n  <div className=\"reviews-container\">\r\n  <h1> Reviews <br/></h1> \r\n\r\n  <table className=\"review-table\">\r\n    <thead> <tr>\r\n      <th>S/No.</th>\r\n      <th>Doctor name</th>\r\n      <th>Doctor specialty</th>\r\n      <th>Provide review</th>\r\n      <th>Review given</th>\r\n    </tr></thead>\r\n\r\n    <tbody>\r\n    {doctors.map(doctor => (\r\n      <tr key={doctor.id}>\r\n        <td>{doctor.id}</td>\r\n        <td>{doctor.name}</td>\r\n        <td>{doctor.specialty}</td>\r\n        <td>           \r\n          { !completedReview[doctor.id] ? (\r\n          <Popup contentStyle={{ width: '33%', height: 'auto', borderRadius:\"0.5rem\" }} trigger={ \r\n            <button className=\"review-btn\"\r\n              onClick={() => handleGiveReview(doctor.id)} \r\n              disabled = {completedReview[doctor.id] && completedReview[doctor.id].ratings >0 \r\n                           && completedReview[doctor.id].remarks.length >0 }\r\n              >\r\n                Give Review </button>\r\n              }  modal nested\r\n            >\r\n\r\n            {(close) => (  \r\n                  <div className=\"feedback-modal\">\r\n                    <GiveReviews\r\n                        serialNumber={doctor.id}\r\n                        onReviewSubmit={(serialNumber, formData) => {\r\n                          handleReviewSubmit(serialNumber, formData);\r\n                          close(); // Close the modal after submission\r\n                        }}\r\n                        review={reviewData[doctor.id]} // Pass the review data\r\n                        onSubmit={close}\r\n                    />\r\n                    <button className=\"close-btn\" onClick={close}>\r\n                      Close </button>\r\n                  </div>\r\n                  )}\r\n            </Popup>\r\n              ):( \r\n              <button className=\"review-btn\" disabled> Give review </button>\r\n              )\r\n          }\r\n        </td>\r\n        <td> {completedReview[doctor.id] && (\r\n            <div>\r\n              Rating: {completedReview[doctor.id].ratings}/5 <br />\r\n              \"{completedReview[doctor.id].review}\"\r\n            </div>\r\n          )}\r\n        </td>\r\n      </tr>\r\n    ))}\r\n    </tbody>\r\n  </table>\r\n\r\n    \r\n\r\n\r\n </div> \r\n </> \r\n \r\n);\r\n}\r\n\r\nexport default ReviewTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}